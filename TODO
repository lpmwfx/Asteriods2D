# TODO - AxiumForge SDF Asteroids

## Projekt Information

**Navn:** AxiumForge â€“ SDF Asteroids
**Engine:** LÃ–VE 2D (Lua)
**Type:** Moderne Asteroids-inspireret arcade shooter

### Projektets Intention

Dette er et eksperimentelt spilprojekt hvor **al grafik genereres matematisk fra SDF/TSDF data** (Signed Distance Fields / Truncated Signed Distance Fields). Ingen bitmap assets (PNG/JPG) bruges - alt tegnes proceduralt fra parametre.

### Kernekoncept

**Visuel Stil:**
- "Glow vector look" med skarpe SDF-kurver og rene lyskanter
- Animeret solsystem i parallax baggrund
- Alt er data-drevet - ingen hardcodede vÃ¦rdier

**Gameplay:**
- UndgÃ¥ meteorer i rummet
- Skyd med instant-hit railgun der penetrerer gennem objekter
- Beskyt en indre zone - meteorer der krydser den giver straf
- Meteorer fragmenterer realistisk nÃ¥r de rammes (TSDF-baseret destruktion)

**Fysik:**
- Box2D til kollision, ricochet og bevÃ¦gelse
- Meteorer har masse og densitet baseret pÃ¥ deres SDF volumen
- Fragmenter arver fysiske egenskaber fra parent meteor

**Teknisk Unikhed:**
- SDF rendering direkte via love.graphics
- TSDF-baseret fragmentering (plan-cuts gennem distance fields)
- Data-drevet arkitektur hvor meteorer defineres som primitive shapes (cirkler, ellipser) med CSG operationer
- Samme SDF data kan senere bruges i LÃ–VR (3D/VR port)

### Reference Materiale

`assets/references/` indeholder billeder af autentiske SDF/TSDF objekter - disse skal bruges som visuel reference for hvordan meteorer og effekter skal se ud.

### Udviklings Princip

- **ModulÃ¦r arkitektur** - rene filer, klart adskilte ansvar
- **Data-drevet** - al logik lÃ¦ser fra data-filer
- **MVP fÃ¸rst** - fÃ¥ en spilbar iteration fÃ¸r advanced features
- **Engelsk kode** - selv om dokumentation er dansk

---

## FASE 1: MVP - FÃ¸rste Spilbare Iteration

### 1. Projektstruktur og LÃ–VE Setup
- [X] Opret mappestruktur (src/core, src/entities, src/render, src/data)
- [X] Opret conf.lua med Lï¿½VE konfiguration (window size, title, version)
- [X] Opret main.lua med grundlï¿½ggende love.load(), love.update(dt), love.draw()
- [X] Test at projektet kï¿½rer med `love .`

### 2. Core Systems (src/core/)
- [X] game_state.lua - State management (menu, playing, paused, game_over)
- [X] input.lua - Input handling (keyboard mappings for rotation, thrust, fire)
- [X] physics.lua - Box2D world setup med korrekte units og gravity=0

### 3. Data Layer (src/data/)
- [X] settings.lua - Game konstanter (screen bounds, spawn radius, railgun cooldown)
- [X] sdf_meteors.lua - Definer minimum 3 meteor typer med SDF primitives:
  - [X] Small meteor (radius ~20-30)
  - [X] Medium meteor (radius ~40-50)
  - [X] Large meteor (radius ~60-80)
  - [X] Inkluder density, fracture_threshold for hver type

### 4. SDF Rendering System (src/render/)
- [X] draw_sdf.lua - Basis SDF rendering funktioner:
  - [X] drawCircleSDF(x, y, radius, color, glowSize) - SDF circle med glow
  - [X] drawCompositeSDF(primitives) - Tegn multiple primitives som ï¿½n form
  - [X] drawLine(x1, y1, x2, y2, thickness, glow) - Til railgun beam
- [X] Test SDF rendering med simple former

### 5. Player Ship Entity (src/entities/ship.lua)
- [X] Opret ship modul med:
  - [X] Box2D polygon body (trekant/kile form)
  - [X] Rotation control (left/right keys)
  - [X] Forward thrust (up key)
  - [X] Position, velocity, angle tracking
  - [X] ship:update(dt) - Hï¿½ndter input og physics
  - [X] ship:draw() - Tegn ship som SDF polygon/lines med glow
- [X] Tune ship physics (mass, friction, angular damping)

### 6. Meteor Entity (src/entities/meteor.lua)
- [X] Opret meteor modul med:
  - [X] Load SDF definition fra data/sdf_meteors.lua
  - [X] Box2D circle body (simpel collider for MVP)
  - [X] Velocity og angular velocity
  - [X] meteor:new(type, x, y, vx, vy) - Constructor
  - [X] meteor:update(dt) - Physics update
  - [X] meteor:draw() - Tegn fra SDF primitives med glow effect
  - [X] meteor:applyDamage(power, x, y, nx, ny) - Damage handler

### 7. Meteor Spawning System
- [X] Spawn manager i game_state.lua eller separat modul:
  - [X] Spawn meteorer i ring udenfor skï¿½rmen (configurable radius)
  - [X] Random spawn positions pï¿½ ring
  - [X] Random velocity rettet mod indre zone (med variation)
  - [X] Spawn interval/rate (start med 2-3 sekunder)
  - [X] Max antal aktive meteorer (start med 5-10)

### 8. Railgun System (src/entities/railgun.lua)
- [X] Opret railgun modul:
  - [X] world:rayCast() implementation fra ship position/angle
  - [X] Cooldown timer (1-2 sekunder)
  - [X] rayCallback() - Hï¿½ndter collision med meteorer
  - [X] railgun:fire(world, x, y, angle) - Affyr fra ship
  - [X] railgun:update(dt) - Opdater cooldown
  - [X] railgun:canFire() - Check cooldown status

### 9. Railgun Visual Effects (src/render/)
- [X] Railgun beam rendering:
  - [X] Tegn instant beam fra ship til raycast max distance
  - [X] Multi-layer glow (tynd core + bred outer glow)
  - [X] Beam fade-out animation (0.1-0.2 sekunder)
  - [X] Impact flash ved collision punkt
- [ ] Screen shake effekt (simpel camera offset)

### 10. TSDF Fragmentation (MVP version)
- [X] Simpel fragmentering i meteor.lua:
  - [X] Ved applyDamage() over threshold ï¿½ spawn 2-3 mindre meteorer
  - [X] Skalï¿½r original SDF ned (0.5x - 0.7x radius)
  - [X] Giv fragmenter velocity vï¿½k fra impact normal
  - [X] Minimum stï¿½rrelse (stop fragmentation under radius ~15)
  - [X] Destruï¿½r original meteor

### 11. Background System (src/render/background.lua)
- [ ] Opret background modul:
  - [ ] Tegn central sol (stor SDF circle med multi-layer glow)
  - [ ] 2-3 planeter pï¿½ forskellige orbits
  - [ ] Langsom orbital animation (rotation_speed per planet)
  - [ ] Parallax effekt (baggrund bevï¿½ger sig lidt med ship)
- [ ] Farvegradienter for planeter
- [ ] **VIGTIGT**: Solsystem skal ses fra 20-30 graders vinkel oppefra (ikke direkte top-down)
  - [ ] Planeter forbliver runde SDF circles
  - [ ] Orbits skal tegnes som ellipser (perspective projection)
  - [ ] Giv dybdefÃ¸lelse med scaling og layering

### 12. Protected Zone
- [X] Tegn indre beskyttet zone (SDF circle outline, ikke filled)
- [X] Collision detection: meteor krydser zone ï¿½ trigger penalty
- [X] Penalty system (reducï¿½r liv/shields eller instant game over for MVP)

### 13. UI System (src/render/ui.lua)
- [ ] Minimal HUD:
  - [ ] Score display (ï¿½verst)
  - [ ] Lives/Shields indicator
  - [ ] Active meteors count
  - [ ] Railgun cooldown indicator (visual bar eller timer)
- [ ] Game Over skï¿½rm
- [ ] Simple pause menu

### 14. Game Loop Integration
- [X] Integrï¿½r alle systemer i main.lua:
  - [X] Initialize ship, physics, background
  - [X] Update loop: input ï¿½ physics ï¿½ meteors ï¿½ railgun ï¿½ spawning
  - [X] Draw loop: background ï¿½ meteors ï¿½ ship ï¿½ railgun effects ï¿½ UI
  - [X] Collision callbacks mellem ship og meteorer

### 15. Polish & Tuning
- [ ] Tune game balance:
  - [ ] Meteor spawn rate
  - [ ] Ship thrust/rotation speed
  - [ ] Railgun power/cooldown
  - [ ] Protected zone size
- [ ] Test fragmentering med forskellige meteor stï¿½rrelser
- [ ] Verificer SDF glow effekter ser korrekte ud (sammenlign med assets/references)

### 16. Documentation
- [X] Opdatï¿½r CHANGELOG med implementerede features
- [X] Opret README.md med:
  - [X] Hvordan man kï¿½rer spillet
  - [X] Controls (arrow keys, space)
  - [X] Gameplay beskrivelse
  - [X] Teknisk overview (SDF/TSDF, Box2D)
- [X] Opdatï¿½r TODO.md med erfaringer og nï¿½ste iteration

## FASE 2: Visual Enhancement (Fra project.md sektion 5)
**MÃ¥l: 2D-rendering med 3D-lignende lys og skygge**

### Pseudo-3D Shading System
- [ ] Implementer SDF normal/gradient calculation
- [ ] Global lysretning (directional light)
- [ ] Pseudo-3D shading for meteorer:
  - [ ] Lysintensitet baseret pÃ¥ SDF-gradient
  - [ ] Simulate volumen og dybde
  - [ ] Shading sÃ¥ meteorer ligner 3D-klipper
- [ ] Overfladestruktur pÃ¥ meteorer:
  - [ ] Overlappende SDF-buler for sten/metal-look
  - [ ] Procedural noise (FBM/Perlin) pÃ¥ surface
  - [ ] Crater-detaljer som smÃ¥ ekstra primitives

### Avanceret Solar System Rendering
- [ ] Planeter med diskret terminator (dag/nat-grÃ¦nse):
  - [ ] Lysretning defineret globalt
  - [ ] Shading sÃ¥ planeter ser kugleformede ud
  - [ ] Gradient transition mellem lys/skygge side
- [ ] Perspektiv korrekt rendering (20-30 grader fra oven)

### Avanceret Ship Rendering
- [ ] Multi-layer SDF ship (krop, cockpit, paneler)
- [ ] Forskellig reflektivitet per layer
- [ ] Lysglimt/highlights langs kanter
- [ ] Simulate metallisk overflade

### Rendering System Upgrade
- [ ] Normal map approximation fra SDF data
- [ ] Simple lysberegninger (diffuse + specular)
- [ ] Ambient occlusion approximation

## FASE 2.5: Post-MVP Gameplay Forbedringer
- [ ] Fuld TSDF mass calculation for fragmenter
- [ ] Meteor-meteor collision med chain reactions
- [ ] Advanced railgun effects (lens flare, particle dust)
- [ ] Sound system (railgun, impacts, explosions)
- [ ] Dynamic difficulty scaling
- [ ] Powerups system
- [ ] Highscore tracking
- [ ] Screen shake effekt (simpel camera offset)

## FASE 3: Advanced Features (Fremtid)
- [ ] GLSL shaders for raymarch rendering
- [ ] Port til Lï¿½VR (3D/VR version)
- [ ] JDA/JDW data format implementation
- [ ] Advanced CSG operations
- [ ] Lore system
- [ ] Level progression

---

## Nuvï¿½rende Status
- [X] Projektdokumentation komplet
- [X] CLAUDE.md oprettet
- [X] Sektion 1-10 implementeret og testet (Core MVP gameplay fÃ¦rdig!)
- [X] Projektet kÃ¸rer fejlfrit med LÃ–VE 11.5
- [X] Fully playable game loop med Ship, Meteors, Railgun og Fragmentering

## Gameplay Status (ðŸŽ‰ MVP COMPLETE! ðŸŽ‰)
- [X] Ship controls (rotation, thrust, screen wrapping)
- [X] Meteor spawning system
- [X] Railgun weapon med penetration
- [X] TSDF fragmentation af meteorer
- [X] SDF rendering for alle entities
- [X] UI med score, lives, meteor count, railgun cooldown
- [X] Animated background med solar system
- [X] Protected zone penalty system
- [X] Ship-meteor collision detection
- [X] Game over conditions
- [X] Ship respawn system
- [X] Score tracking
- [X] README.md komplet

## Nï¿½ste Skridt
Start med sektion 11-16 for at fÃ¦rdiggÃ¸re MVP:
- Background system forbedringer (perspektiv)
- Protected zone collision detection
- UI polish
- Game loop integration finalisering
- Tuning og balancing
- Documentation
