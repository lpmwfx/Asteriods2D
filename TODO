# TODO - AxiumForge SDF Asteroids

## Projekt Information

**Navn:** AxiumForge – SDF Asteroids
**Engine:** LÖVE 2D (Lua)
**Type:** Moderne Asteroids-inspireret arcade shooter

### Projektets Intention

Dette er et eksperimentelt spilprojekt hvor **al grafik genereres matematisk fra SDF/TSDF data** (Signed Distance Fields / Truncated Signed Distance Fields). Ingen bitmap assets (PNG/JPG) bruges - alt tegnes proceduralt fra parametre.

### Kernekoncept

**Visuel Stil:**
- "Glow vector look" med skarpe SDF-kurver og rene lyskanter
- Animeret solsystem i parallax baggrund
- Alt er data-drevet - ingen hardcodede værdier

**Gameplay:**
- Undgå meteorer i rummet
- Skyd med instant-hit railgun der penetrerer gennem objekter
- Beskyt en indre zone - meteorer der krydser den giver straf
- Meteorer fragmenterer realistisk når de rammes (TSDF-baseret destruktion)

**Fysik:**
- Box2D til kollision, ricochet og bevægelse
- Meteorer har masse og densitet baseret på deres SDF volumen
- Fragmenter arver fysiske egenskaber fra parent meteor

**Teknisk Unikhed:**
- SDF rendering direkte via love.graphics
- TSDF-baseret fragmentering (plan-cuts gennem distance fields)
- Data-drevet arkitektur hvor meteorer defineres som primitive shapes (cirkler, ellipser) med CSG operationer
- Samme SDF data kan senere bruges i LÖVR (3D/VR port)

### Reference Materiale

`assets/references/` indeholder billeder af autentiske SDF/TSDF objekter - disse skal bruges som visuel reference for hvordan meteorer og effekter skal se ud.

### Udviklings Princip

- **Modulær arkitektur** - rene filer, klart adskilte ansvar
- **Data-drevet** - al logik læser fra data-filer
- **MVP først** - få en spilbar iteration før advanced features
- **Engelsk kode** - selv om dokumentation er dansk

---

## FASE 1: MVP - Første Spilbare Iteration

### 1. Projektstruktur og LÖVE Setup
- [X] Opret mappestruktur (src/core, src/entities, src/render, src/data)
- [X] Opret conf.lua med L�VE konfiguration (window size, title, version)
- [X] Opret main.lua med grundl�ggende love.load(), love.update(dt), love.draw()
- [X] Test at projektet k�rer med `love .`

### 2. Core Systems (src/core/)
- [X] game_state.lua - State management (menu, playing, paused, game_over)
- [X] input.lua - Input handling (keyboard mappings for rotation, thrust, fire)
- [X] physics.lua - Box2D world setup med korrekte units og gravity=0

### 3. Data Layer (src/data/)
- [X] settings.lua - Game konstanter (screen bounds, spawn radius, railgun cooldown)
- [X] sdf_meteors.lua - Definer minimum 3 meteor typer med SDF primitives:
  - [X] Small meteor (radius ~20-30)
  - [X] Medium meteor (radius ~40-50)
  - [X] Large meteor (radius ~60-80)
  - [X] Inkluder density, fracture_threshold for hver type

### 4. SDF Rendering System (src/render/)
- [X] draw_sdf.lua - Basis SDF rendering funktioner:
  - [X] drawCircleSDF(x, y, radius, color, glowSize) - SDF circle med glow
  - [X] drawCompositeSDF(primitives) - Tegn multiple primitives som �n form
  - [X] drawLine(x1, y1, x2, y2, thickness, glow) - Til railgun beam
- [X] Test SDF rendering med simple former

### 5. Player Ship Entity (src/entities/ship.lua)
- [ ] Opret ship modul med:
  - [ ] Box2D polygon body (trekant/kile form)
  - [ ] Rotation control (left/right keys)
  - [ ] Forward thrust (up key)
  - [ ] Position, velocity, angle tracking
  - [ ] ship:update(dt) - H�ndter input og physics
  - [ ] ship:draw() - Tegn ship som SDF polygon/lines med glow
- [ ] Tune ship physics (mass, friction, angular damping)

### 6. Meteor Entity (src/entities/meteor.lua)
- [ ] Opret meteor modul med:
  - [ ] Load SDF definition fra data/sdf_meteors.lua
  - [ ] Box2D circle body (simpel collider for MVP)
  - [ ] Velocity og angular velocity
  - [ ] meteor:new(type, x, y, vx, vy) - Constructor
  - [ ] meteor:update(dt) - Physics update
  - [ ] meteor:draw() - Tegn fra SDF primitives med glow effect
  - [ ] meteor:applyDamage(power, x, y, nx, ny) - Damage handler

### 7. Meteor Spawning System
- [ ] Spawn manager i game_state.lua eller separat modul:
  - [ ] Spawn meteorer i ring udenfor sk�rmen (configurable radius)
  - [ ] Random spawn positions p� ring
  - [ ] Random velocity rettet mod indre zone (med variation)
  - [ ] Spawn interval/rate (start med 2-3 sekunder)
  - [ ] Max antal aktive meteorer (start med 5-10)

### 8. Railgun System (src/entities/railgun.lua)
- [ ] Opret railgun modul:
  - [ ] world:rayCast() implementation fra ship position/angle
  - [ ] Cooldown timer (1-2 sekunder)
  - [ ] rayCallback() - H�ndter collision med meteorer
  - [ ] railgun:fire(world, x, y, angle) - Affyr fra ship
  - [ ] railgun:update(dt) - Opdater cooldown
  - [ ] railgun:canFire() - Check cooldown status

### 9. Railgun Visual Effects (src/render/)
- [ ] Railgun beam rendering:
  - [ ] Tegn instant beam fra ship til raycast max distance
  - [ ] Multi-layer glow (tynd core + bred outer glow)
  - [ ] Beam fade-out animation (0.1-0.2 sekunder)
  - [ ] Impact flash ved collision punkt
- [ ] Screen shake effekt (simpel camera offset)

### 10. TSDF Fragmentation (MVP version)
- [ ] Simpel fragmentering i meteor.lua:
  - [ ] Ved applyDamage() over threshold � spawn 2-3 mindre meteorer
  - [ ] Skal�r original SDF ned (0.5x - 0.7x radius)
  - [ ] Giv fragmenter velocity v�k fra impact normal
  - [ ] Minimum st�rrelse (stop fragmentation under radius ~15)
  - [ ] Destru�r original meteor

### 11. Background System (src/render/background.lua)
- [ ] Opret background modul:
  - [ ] Tegn central sol (stor SDF circle med multi-layer glow)
  - [ ] 2-3 planeter p� forskellige orbits
  - [ ] Langsom orbital animation (rotation_speed per planet)
  - [ ] Parallax effekt (baggrund bev�ger sig lidt med ship)
- [ ] Farvegradienter for planeter

### 12. Protected Zone
- [ ] Tegn indre beskyttet zone (SDF circle outline, ikke filled)
- [ ] Collision detection: meteor krydser zone � trigger penalty
- [ ] Penalty system (reduc�r liv/shields eller instant game over for MVP)

### 13. UI System (src/render/ui.lua)
- [ ] Minimal HUD:
  - [ ] Score display (�verst)
  - [ ] Lives/Shields indicator
  - [ ] Active meteors count
  - [ ] Railgun cooldown indicator (visual bar eller timer)
- [ ] Game Over sk�rm
- [ ] Simple pause menu

### 14. Game Loop Integration
- [ ] Integr�r alle systemer i main.lua:
  - [ ] Initialize ship, physics, background
  - [ ] Update loop: input � physics � meteors � railgun � spawning
  - [ ] Draw loop: background � meteors � ship � railgun effects � UI
  - [ ] Collision callbacks mellem ship og meteorer

### 15. Polish & Tuning
- [ ] Tune game balance:
  - [ ] Meteor spawn rate
  - [ ] Ship thrust/rotation speed
  - [ ] Railgun power/cooldown
  - [ ] Protected zone size
- [ ] Test fragmentering med forskellige meteor st�rrelser
- [ ] Verificer SDF glow effekter ser korrekte ud (sammenlign med assets/references)

### 16. Documentation
- [ ] Opdat�r CHANGELOG med implementerede features
- [ ] Opret README.md med:
  - [ ] Hvordan man k�rer spillet
  - [ ] Controls (arrow keys, space)
  - [ ] Gameplay beskrivelse
  - [ ] Teknisk overview (SDF/TSDF, Box2D)
- [ ] Opdat�r TODO.md med erfaringer og n�ste iteration

## FASE 2: Post-MVP Forbedringer (Ikke nu)
- [ ] Fuld TSDF mass calculation for fragmenter
- [ ] Meteor-meteor collision med chain reactions
- [ ] Procedural noise p� meteor shapes (FBM/Perlin)
- [ ] Advanced railgun effects (lens flare, particle dust)
- [ ] Sound system (railgun, impacts, explosions)
- [ ] Dynamic difficulty scaling
- [ ] Powerups system
- [ ] Highscore tracking

## FASE 3: Advanced Features (Fremtid)
- [ ] GLSL shaders for raymarch rendering
- [ ] Port til L�VR (3D/VR version)
- [ ] JDA/JDW data format implementation
- [ ] Advanced CSG operations
- [ ] Lore system
- [ ] Level progression

---

## Nuv�rende Status
- [X] Projektdokumentation komplet
- [X] CLAUDE.md oprettet
- [X] Sektion 1-4 implementeret og testet (Projektstruktur, Core Systems, Data Layer, SDF Rendering)
- [X] Projektet kører fejlfrit med LÖVE 11.5
- [ ] Entities (Ship, Meteor, Railgun) ikke implementeret endnu

## N�ste Skridt
Start med sektion 5-10 for at implementere entities og gameplay systemer.
